<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>รายการแจ้งซ่อม - สำหรับช่าง</title>
    
    <!-- Google Fonts: Kanit -->
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { 
            font-family: 'Kanit', sans-serif; 
            background-color: #f4f5f7;
            -webkit-tap-highlight-color: transparent; 
        }
        .min-h-screen-with-bar {
            min-height: calc(100vh - 120px); 
            padding-bottom: 120px;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animation & Mask (Reusable) */
        .bottom-sheet { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform: translateY(100%); }
        .bottom-sheet.active { transform: translateY(0); }
        .mask { transition: opacity 0.3s; opacity: 0; pointer-events: none; }
        .mask.active { opacity: 1; pointer-events: auto; }
    </style>
</head>
<body class="min-h-screen-with-bar relative"> 

<!-- 1. Header Bar (Fixed at Top) -->
<header class="sticky top-0 z-10 bg-white/95 backdrop-blur-sm shadow-md py-4 px-4">
    <div class="flex items-center justify-between">
        <!-- Back Button: กลับไปยังหน้าค้นหาหอพักหลัก -->
        <a href="index.html" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition">
            <i class="fa-solid fa-chevron-left"></i>
        </a>
        <h1 class="text-xl font-bold text-gray-800">รายการซ่อมที่ต้องดำเนินการ</h1>
        <div class="w-10"></div> <!-- Placeholder for alignment -->
    </div>
</header>

<main class="p-4 space-y-5">
    
    <!-- หัวข้อรายการซ่อมที่ต้องทำทั้งหมด -->
    <h2 class="text-lg font-bold text-gray-800 pt-2">งานซ่อมห้องพักทั้งหมด (4 รายการ)</h2>

    <!-- CARD 1: ประเภท: งานไฟ (ด่วน) -->
    <div class="bg-white rounded-2xl p-4 shadow-md border-l-4 border-red-500 active:scale-[0.99] transition-transform">
        <div class="flex justify-between items-center mb-2">
            <span class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-bold flex items-center gap-1">
                <i class="fa-solid fa-bolt"></i> งานไฟ
            </span>
            <p class="text-xl font-bold text-red-600">฿1,500</p>
        </div>
        
        <h3 class="text-md font-bold text-gray-800 mb-1 flex items-center gap-2">
            <i class="fa-solid fa-building text-red-500"></i> The Campus Condo
        </h3>
        <p class="text-xs text-gray-500 mb-2">
            <i class="fa-solid fa-map-pin mr-1"></i> ซอยรังสิตภิรมย์
        </p>
        
        <p class="text-sm text-gray-600 border-t border-dashed border-gray-200 pt-2">
            <span class="font-semibold text-gray-700">ห้อง C304:</span> ไฟฟ้าในห้องดับทั้งหมด (อาจเป็น Breaker/สายขาด)
        </p>
        <div class="mt-3 flex justify-between items-center">
             <span class="text-xs text-gray-400"><i class="fa-regular fa-clock mr-1"></i> แจ้งเมื่อ 2 นาทีที่แล้ว</span>
             <span class="text-xs text-red-500 font-medium bg-red-100 px-2 py-0.5 rounded-full">งานด่วน</span>
        </div>
    </div>
    
    <!-- CARD 2: ประเภท: งานประปา -->
    <div class="bg-white rounded-2xl p-4 shadow-md border-l-4 border-orange-500 active:scale-[0.99] transition-transform">
        <div class="flex justify-between items-center mb-2">
            <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold flex items-center gap-1">
                <i class="fa-solid fa-faucet-drip"></i> งานประปา
            </span>
            <p class="text-xl font-bold text-red-600">฿800</p>
        </div>
        <h3 class="text-md font-bold text-gray-800 mb-1 flex items-center gap-2">
            <i class="fa-solid fa-house-chimney text-orange-500"></i> หอพักป้าสมร
        </h3>
        <p class="text-xs text-gray-500 mb-2">
            <i class="fa-solid fa-map-pin mr-1"></i> หมู่บ้านเมืองเอก
        </p>
        <p class="text-sm text-gray-600 border-t border-dashed border-gray-200 pt-2">
            <span class="font-semibold text-gray-700">ห้อง A102:</span> ท่อระบายน้ำทิ้งในห้องน้ำอุดตัน
        </p>
        <div class="mt-3 flex justify-between items-center">
             <span class="text-xs text-gray-400"><i class="fa-regular fa-clock mr-1"></i> แจ้งเมื่อ 1 ชั่วโมงที่แล้ว</span>
             <span class="text-xs text-gray-500 font-medium">ห้องว่าง: เข้าซ่อมได้ทันที</span>
        </div>
    </div>
    
    <!-- CARD 3: ประเภท: งานเครื่องปรับอากาศ -->
    <div class="bg-white rounded-2xl p-4 shadow-md border-l-4 border-blue-500 active:scale-[0.99] transition-transform">
        <div class="flex justify-between items-center mb-2">
            <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-bold flex items-center gap-1">
                <i class="fa-regular fa-snowflake"></i> งานเครื่องปรับอากาศ
            </span>
             <p class="text-xl font-bold text-red-600">฿4,500</p>
        </div>
        <h3 class="text-md font-bold text-gray-800 mb-1 flex items-center gap-2">
            <i class="fa-solid fa-building text-blue-500"></i> Sky View Apartment
        </h3>
        <p class="text-xs text-gray-500 mb-2">
            <i class="fa-solid fa-map-pin mr-1"></i> หลักหก
        </p>
        <p class="text-sm text-gray-600 border-t border-dashed border-gray-200 pt-2">
            <span class="font-semibold text-gray-700">ห้อง D401:</span> แอร์ไม่เย็น ต้องเติมน้ำยา/ซ่อมคอมเพรสเซอร์
        </p>
        <div class="mt-3 flex justify-between items-center">
             <span class="text-xs text-gray-400"><i class="fa-regular fa-clock mr-1"></i> แจ้งเมื่อ 1 วันที่แล้ว</span>
             <span class="text-xs text-gray-500 font-medium">นัดหมาย: พรุ่งนี้ 10:00 น.</span>
        </div>
    </div>

    <!-- CARD 4: ประเภท: งานโครงสร้าง -->
    <div class="bg-white rounded-2xl p-4 shadow-md border-l-4 border-gray-400 active:scale-[0.99] transition-transform">
        <div class="flex justify-between items-center mb-2">
            <span class="px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-xs font-bold flex items-center gap-1">
                <i class="fa-solid fa-house-crack"></i> งานโครงสร้าง/เฟอร์นิเจอร์
            </span>
            <p class="text-xl font-bold text-red-600">฿600</p>
        </div>
        <h3 class="text-md font-bold text-gray-800 mb-1 flex items-center gap-2">
            <i class="fa-solid fa-boxes-stacked text-gray-500"></i> The Campus Condo
        </h3>
        <p class="text-xs text-gray-500 mb-2">
            <i class="fa-solid fa-map-pin mr-1"></i> ซอยรังสิตภิรมย์
        </p>
        <p class="text-sm text-gray-600 border-t border-dashed border-gray-200 pt-2">
            <span class="font-semibold text-gray-700">ห้อง B203:</span> ลูกบิดประตูตู้เสื้อผ้าหลุด
        </p>
        <div class="mt-3 flex justify-between items-center">
             <span class="text-xs text-gray-400"><i class="fa-regular fa-clock mr-1"></i> แจ้งเมื่อ 3 วันที่แล้ว</span>
             <span class="text-xs text-gray-500 font-medium">ห้องว่าง: เตรียมอะไหล่</span>
        </div>
    </div>
    
    <div class="text-center py-4 text-gray-400 text-xs">
        <p>--- สิ้นสุดรายการแจ้งซ่อมทั้งหมด (4 รายการ) ---</p>
    </div>
    

</main>

<!-- MASK Overlay -->

<div id="commonMask" class="mask fixed inset-0 bg-black/60 z-50 backdrop-blur-[2px]" onclick="closeFilterSheet()"></div>

<!-- FILTER SHEET -->

<div id="filterSheet" class="bottom-sheet fixed bottom-0 left-0 w-full bg-white z-[60] rounded-t-[32px] shadow-2xl flex flex-col max-h-[85vh]">
    <div class="flex justify-between items-center px-6 pt-5 pb-2">
        <h2 class="text-lg font-bold text-gray-800">ตัวกรองงานซ่อม</h2>
        <button onclick="closeFilterSheet()" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 hover:bg-gray-200"><i class="fa-solid fa-xmark"></i></button>
    </div>

<div class="flex-1 overflow-y-auto px-6 py-4 space-y-6">
    <!-- 1. Repair Type Filter -->
    <div>
        <label class="text-sm font-semibold text-gray-700 mb-3 block">ประเภทงานซ่อม</label>
        <div class="flex flex-wrap gap-2">
            <label class="cursor-pointer flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-full border border-gray-200 has-[:checked]:bg-blue-50 has-[:checked]:border-blue-500 has-[:checked]:text-blue-600"><input type="checkbox" class="hidden"><i class="fa-solid fa-bolt"></i> <span class="text-xs">งานไฟ</span></label>
            <label class="cursor-pointer flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-full border border-gray-200 has-[:checked]:bg-blue-50 has-[:checked]:border-blue-500 has-[:checked]:text-blue-600"><input type="checkbox" class="hidden"><i class="fa-solid fa-faucet-drip"></i> <span class="text-xs">งานประปา</span></label>
            <label class="cursor-pointer flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-full border border-gray-200 has-[:checked]:bg-blue-50 has-[:checked]:border-blue-500 has-[:checked]:text-blue-600"><input type="checkbox" class="hidden"><i class="fa-regular fa-snowflake"></i> <span class="text-xs">งานเครื่องปรับอากาศ</span></label>
            <label class="cursor-pointer flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-full border border-gray-200 has-[:checked]:bg-blue-50 has-[:checked]:border-blue-500 has-[:checked]:text-blue-600"><input type="checkbox" class="hidden"><i class="fa-solid fa-house-crack"></i> <span class="text-xs">งานโครงสร้าง</span></label>
        </div>
    </div>
    
    <!-- 2. Budget/Price Range -->
    <div>
        <label class="text-sm font-semibold text-gray-700 mb-3 block">ช่วงราคา/งบประมาณ</label>
        <div class="flex gap-2">
            <button class="flex-1 py-2 rounded-xl border-2 border-blue-600 bg-blue-50 text-blue-600 text-xs font-bold">ทุกราคา</button>
            <button class="flex-1 py-2 rounded-xl border border-gray-200 text-gray-600 text-xs hover:border-blue-300"> < 1,000 บาท</button>
            <button class="flex-1 py-2 rounded-xl border border-gray-200 text-gray-600 text-xs hover:border-blue-300"> > 3,000 บาท</button>
        </div>
    </div>
    
    <!-- 3. Room Status -->
    <div>
        <label class="text-sm font-semibold text-gray-700 mb-3 block">สถานะห้อง (เพื่อเข้าซ่อม)</label>
        <div class="flex gap-2">
            <button class="flex-1 py-2 rounded-xl border-2 border-green-500 bg-green-50 text-green-700 text-xs font-bold shadow-sm flex items-center justify-center gap-1"><i class="fa-solid fa-house-circle-check"></i> ห้องว่าง</button>
            <button class="flex-1 py-2 rounded-xl border border-gray-200 text-gray-600 text-xs hover:border-gray-400"><i class="fa-solid fa-user"></i> ห้องมีผู้พัก</button>
        </div>
    </div>
</div>
<div class="p-4 border-t border-gray-100 pb-8">
    <button onclick="closeFilterSheet()" class="w-full bg-gray-900 text-white font-bold py-3.5 rounded-2xl shadow-lg active:scale-95 transition">ค้นหางานซ่อม</button>
</div>
</div>


<!-- 4. Compact Bar (Bottom Bar - Reusable) -->
<div class="fixed bottom-0 left-0 right-0 z-40 bg-white/95 backdrop-blur-sm shadow-[0_-5px_20px_-5px_rgba(0,0,0,0.1)] pt-2 pb-6 px-4">
    <div class="flex items-center justify-between gap-2">
        
        <!-- Group: Location & Maintenance (ซ้ายมือ) -->
        <div class="flex gap-2">
            <!-- Location Button: เปลี่ยนลิงก์/ฟังก์ชันกลับไปหน้าหลัก -->
            <a href="index.html" class="w-10 h-10 flex flex-shrink-0 items-center justify-center rounded-full bg-gray-100 text-blue-600 hover:bg-blue-50 transition active:scale-90" title="ค้นหาหอพัก">
                <i class="fa-solid fa-map-location-dot text-lg"></i>
            </a>
            
            <!-- Technician Report (ปุ่มแจ้งซ่อม - ACTIVE) -->
            <a href="maintenance_report.html" class="w-10 h-10 flex flex-shrink-0 items-center justify-center rounded-full bg-red-600 text-white shadow-lg shadow-red-200 transition" title="ดูรายการแจ้งซ่อม">
                <i class="fa-solid fa-screwdriver-wrench text-sm"></i> 
            </a>
        </div>

        <!-- Search & Filter Trigger (กลาง) -->
        <div class="flex-1 bg-gray-100/80 rounded-full h-11 px-4 flex items-center gap-2 relative max-w-[220px]">
            <i class="fa-solid fa-magnifying-glass text-gray-400 text-sm"></i>
            <input type="text" class="bg-transparent w-full text-sm text-gray-700 placeholder-gray-400 focus:outline-none" placeholder="ค้นหางานซ่อม...">
            <!-- ปุ่ม Filter ในหน้างานซ่อม (สำหรับกรองประเภท) -->
            <button type="button" onclick="openFilterSheet()" class="absolute right-1 top-1 h-9 w-9 bg-white rounded-full shadow-sm flex items-center justify-center text-gray-500 hover:text-blue-600 transition">
                <i class="fa-solid fa-sliders text-xs"></i>
            </button>
        </div>
        
        <!-- Login (ขวามือ) -->
        <a href="index.html" class="w-10 h-10 flex flex-shrink-0 items-center justify-center rounded-full bg-blue-600 text-white shadow-lg shadow-blue-200 active:scale-95 transition" title="เข้าสู่ระบบ">
            <i class="fa-solid fa-right-to-bracket text-sm"></i>
        </a>
    </div>
</div>

<!-- JAVASCRIPT LOGIC -->

<script>
    const filterSheet = document.getElementById('filterSheet');
    const mask = document.getElementById('commonMask');

    function openFilterSheet() { 
        filterSheet.classList.add('active'); 
        mask.classList.add('active'); 
        document.body.style.overflow = 'hidden'; 
    }
    
    function closeFilterSheet() { 
        filterSheet.classList.remove('active'); 
        mask.classList.remove('active'); 
        document.body.style.overflow = 'auto'; 
    }
    
    // ตั้งค่าปุ่ม Filter ให้ใช้งานฟังก์ชันใหม่
    document.querySelector('.compact-bar button').onclick = openFilterSheet;
</script>
</body>
</html>