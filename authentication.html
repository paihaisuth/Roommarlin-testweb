<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบจัดการหอพัก - All in One Authentication</title>
    
    <!-- Google Fonts: Kanit -->
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-image: url('https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
        }
        /* Glassmorphism Effect */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        /* Fade Animation */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    </style>
</head>
<body class="h-screen flex items-center justify-center bg-gray-900/60 blend-mode-overlay overflow-hidden">

    <!-- Main Container -->
    <div class="glass-panel w-full max-w-md rounded-2xl shadow-2xl mx-4 flex flex-col max-h-[90vh] relative overflow-hidden transition-all duration-300">
        
        <!-- Header (Logo) - แสดงตลอด -->
        <div class="text-center pt-8 pb-4 px-8">
            <div class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-gradient-to-br from-blue-600 to-indigo-600 text-white text-2xl shadow-lg mb-3">
                <i class="fa-solid fa-building-user"></i>
            </div>
            <h1 class="text-2xl font-bold text-gray-800 tracking-wide">DormSystem</h1>
            <p class="text-gray-500 text-xs">ระบบจัดการหอพักออนไลน์ครบวงจร</p>
        </div>

        <!-- Dynamic Content Area (เปลี่ยนหน้าในนี้) -->
        <div class="flex-1 overflow-y-auto custom-scroll px-8 pb-8">

            <!-- ============================================= -->
            <!-- 1. VIEW: เข้าสู่ระบบ (LOGIN) -->
            <!-- ============================================= -->
            <div id="view-login" class="fade-in">
                
                <!-- Role Switcher -->
                <div class="bg-gray-100 p-1 rounded-xl flex mb-6 shadow-inner">
                    <button onclick="setRole('login', 'tenant')" id="login-btn-tenant" class="w-1/2 py-2 rounded-lg text-sm font-semibold transition-all bg-white text-blue-600 shadow-sm">
                        <i class="fa-solid fa-user mr-1"></i> ผู้เช่า
                    </button>
                    <button onclick="setRole('login', 'owner')" id="login-btn-owner" class="w-1/2 py-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-700 transition-all">
                        <i class="fa-solid fa-user-tie mr-1"></i> เจ้าของหอ
                    </button>
                </div>

                <form action="#" method="POST" class="space-y-4">
                    <input type="hidden" name="role" id="login-role-input" value="tenant">
                    
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1 ml-1">เบอร์โทรศัพท์ หรือ อีเมล</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-gray-400"><i class="fa-solid fa-id-card-clip"></i></span>
                            <input type="text" class="w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition text-sm" placeholder="กรอกข้อมูล">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1 ml-1">รหัสผ่าน</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-gray-400"><i class="fa-solid fa-lock"></i></span>
                            <input type="password" class="w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition text-sm" placeholder="********">
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between text-xs mt-1">
                        <label class="flex items-center cursor-pointer text-gray-600 select-none hover:text-gray-800">
                            <input type="checkbox" class="mr-1.5 rounded text-blue-600 focus:ring-blue-500 border-gray-300"> จำรหัสผ่าน
                        </label>
                        <a href="#" onclick="switchView('view-forgot-request')" class="text-blue-600 hover:text-blue-800 hover:underline font-medium">ลืมรหัสผ่าน?</a>
                    </div>

                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg shadow-blue-500/30 transition duration-200 active:scale-[0.98]">
                        เข้าสู่ระบบ
                    </button>
                </form>

                <div class="mt-6 text-center text-xs text-gray-500">
                    ยังไม่มีบัญชีผู้ใช้งาน? 
                    <a href="#" onclick="switchView('view-register')" class="text-blue-600 font-bold hover:underline text-sm ml-1">สมัครสมาชิกใหม่</a>
                </div>
            </div>

            <!-- ============================================= -->
            <!-- 2. VIEW: สมัครสมาชิก (REGISTER) -->
            <!-- ============================================= -->
            <div id="view-register" class="hidden fade-in">
                
                <h2 class="text-center text-lg font-bold text-gray-800 mb-4">สร้างบัญชีใหม่</h2>

                <!-- Role Switcher -->
                <div class="bg-gray-100 p-1 rounded-xl flex mb-5 shadow-inner">
                    <button onclick="setRole('register', 'tenant')" id="reg-btn-tenant" class="w-1/2 py-2 rounded-lg text-sm font-semibold transition-all bg-white text-green-600 shadow-sm">
                        ผู้เช่า
                    </button>
                    <button onclick="setRole('register', 'owner')" id="reg-btn-owner" class="w-1/2 py-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-700 transition-all">
                        เจ้าของหอ
                    </button>
                </div>

                <form action="#" method="POST" class="space-y-3">
                    <input type="hidden" name="role" id="reg-role-input" value="tenant">

                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-[10px] text-gray-500 mb-1 ml-1">ชื่อจริง</label>
                            <input type="text" class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none text-sm" required>
                        </div>
                        <div>
                            <label class="block text-[10px] text-gray-500 mb-1 ml-1">นามสกุล</label>
                            <input type="text" class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none text-sm" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] text-gray-500 mb-1 ml-1">เบอร์โทรศัพท์ (User ID)</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-gray-400 text-xs"><i class="fa-solid fa-phone"></i></span>
                            <input type="tel" class="w-full pl-9 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none text-sm" placeholder="08x-xxx-xxxx" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] text-gray-500 mb-1 ml-1">อีเมล</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-gray-400 text-xs"><i class="fa-solid fa-envelope"></i></span>
                            <input type="email" class="w-full pl-9 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none text-sm" placeholder="email@Example.com">
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] text-gray-500 mb-1 ml-1">รหัสผ่าน</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-gray-400 text-xs"><i class="fa-solid fa-key"></i></span>
                            <input type="password" class="w-full pl-9 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none text-sm" placeholder="อย่างน้อย 8 ตัวอักษร" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] text-gray-500 mb-1 ml-1">ยืนยันรหัสผ่าน</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-gray-400 text-xs"><i class="fa-solid fa-check-double"></i></span>
                            <input type="password" class="w-full pl-9 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none text-sm" required>
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2.5 rounded-xl shadow-lg shadow-green-500/30 transition duration-200 mt-2 active:scale-[0.98]">
                        ลงทะเบียนทันที
                    </button>
                </form>

                <div class="mt-4 text-center text-xs text-gray-500">
                    มีบัญชีอยู่แล้ว? 
                    <a href="#" onclick="switchView('view-login')" class="text-blue-600 font-bold hover:underline ml-1">เข้าสู่ระบบ</a>
                </div>
            </div>

            <!-- ============================================= -->
            <!-- 3. VIEW: ลืมรหัสผ่าน (REQUEST) -->
            <!-- ============================================= -->
            <div id="view-forgot-request" class="hidden fade-in pt-2">
                <div class="text-center mb-6">
                    <div class="bg-orange-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2 text-orange-500 text-xl">
                        <i class="fa-solid fa-unlock-keyhole"></i>
                    </div>
                    <h2 class="text-lg font-bold text-gray-800">ลืมรหัสผ่าน</h2>
                    <p class="text-gray-500 text-xs mt-1">กรอกอีเมลหรือเบอร์โทรศัพท์ที่ลงทะเบียนไว้<br>ระบบจะส่งรหัสยืนยัน (OTP) ให้คุณ</p>
                </div>

                <form onsubmit="event.preventDefault(); switchView('view-forgot-otp');" class="space-y-4">
                    <div>
                        <input type="text" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:outline-none text-center text-sm placeholder-gray-400" placeholder="อีเมล หรือ เบอร์โทรศัพท์" required>
                    </div>
                    <button type="submit" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-xl shadow-lg shadow-orange-500/30 transition duration-200 active:scale-[0.98]">
                        ส่งรหัส OTP
                    </button>
                </form>

                <div class="mt-6 text-center text-xs">
                    <a href="#" onclick="switchView('view-login')" class="text-gray-400 hover:text-gray-600 flex items-center justify-center gap-2 transition">
                        <i class="fa-solid fa-arrow-left"></i> กลับไปหน้าเข้าสู่ระบบ
                    </a>
                </div>
            </div>

            <!-- ============================================= -->
            <!-- 4. VIEW: ยืนยัน OTP (VERIFY) -->
            <!-- ============================================= -->
            <div id="view-forgot-otp" class="hidden fade-in pt-2">
                <div class="text-center mb-6">
                    <div class="bg-purple-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2 text-purple-600 text-xl">
                        <i class="fa-solid fa-shield-cat"></i>
                    </div>
                    <h2 class="text-lg font-bold text-gray-800">ยืนยันตัวตน</h2>
                    <p class="text-gray-500 text-xs mt-1">กรุณากรอกรหัส 6 หลักที่ได้รับ<br>อ้างอิง: <span class="font-mono font-bold text-purple-600">REF-882</span></p>
                </div>

                <form onsubmit="event.preventDefault(); switchView('view-forgot-reset');" class="space-y-6">
                    <div class="flex justify-center gap-2">
                        <input type="text" maxlength="1" class="w-10 h-12 text-center border-2 border-gray-200 rounded-lg focus:border-purple-600 focus:outline-none text-xl font-bold bg-white" autofocus>
                        <input type="text" maxlength="1" class="w-10 h-12 text-center border-2 border-gray-200 rounded-lg focus:border-purple-600 focus:outline-none text-xl font-bold bg-white">
                        <input type="text" maxlength="1" class="w-10 h-12 text-center border-2 border-gray-200 rounded-lg focus:border-purple-600 focus:outline-none text-xl font-bold bg-white">
                        <input type="text" maxlength="1" class="w-10 h-12 text-center border-2 border-gray-200 rounded-lg focus:border-purple-600 focus:outline-none text-xl font-bold bg-white">
                        <input type="text" maxlength="1" class="w-10 h-12 text-center border-2 border-gray-200 rounded-lg focus:border-purple-600 focus:outline-none text-xl font-bold bg-white">
                        <input type="text" maxlength="1" class="w-10 h-12 text-center border-2 border-gray-200 rounded-lg focus:border-purple-600 focus:outline-none text-xl font-bold bg-white">
                    </div>

                    <div class="text-center text-xs text-gray-400">
                        ไม่ได้รับรหัส? <button type="button" class="text-purple-600 font-bold hover:underline">ส่งอีกครั้ง (30s)</button>
                    </div>

                    <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-xl shadow-lg shadow-purple-500/30 transition duration-200 active:scale-[0.98]">
                        ยืนยันรหัส
                    </button>
                </form>

                <div class="mt-6 text-center text-xs">
                    <a href="#" onclick="switchView('view-forgot-request')" class="text-gray-400 hover:text-gray-600">
                        แก้ไขเบอร์โทร / อีเมล
                    </a>
                </div>
            </div>

            <!-- ============================================= -->
            <!-- 5. VIEW: ตั้งรหัสใหม่ (RESET) -->
            <!-- ============================================= -->
            <div id="view-forgot-reset" class="hidden fade-in pt-2">
                <div class="text-center mb-6">
                    <div class="bg-teal-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2 text-teal-600 text-xl">
                        <i class="fa-solid fa-key"></i>
                    </div>
                    <h2 class="text-lg font-bold text-gray-800">ตั้งรหัสผ่านใหม่</h2>
                    <p class="text-gray-500 text-xs mt-1">กำหนดรหัสผ่านใหม่ของคุณ<br>ต้องมีความยาวอย่างน้อย 8 ตัวอักษร</p>
                </div>

                <form onsubmit="alert('เปลี่ยนรหัสผ่านสำเร็จ!'); switchView('view-login');" class="space-y-4">
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1 ml-1">รหัสผ่านใหม่</label>
                        <input type="password" class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:outline-none text-sm transition" placeholder="New Password" required>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1 ml-1">ยืนยันรหัสผ่าน</label>
                        <input type="password" class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:outline-none text-sm transition" placeholder="Confirm Password" required>
                    </div>

                    <button type="submit" class="w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 rounded-xl shadow-lg shadow-teal-500/30 transition duration-200 mt-2 active:scale-[0.98]">
                        บันทึกรหัสผ่านใหม่
                    </button>
                </form>
            </div>

        </div> <!-- End Content Area -->
    </div> <!-- End Main Container -->

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- 1. System Navigation Logic ---
        function switchView(targetId) {
            const allViews = [
                'view-login', 
                'view-register', 
                'view-forgot-request', 
                'view-forgot-otp', 
                'view-forgot-reset'
            ];

            allViews.forEach(viewId => {
                const el = document.getElementById(viewId);
                if (viewId === targetId) {
                    el.classList.remove('hidden');
                } else {
                    el.classList.add('hidden');
                }
            });
        }

        // --- 2. Role Selector Logic (Shared for Login & Register) ---
        function setRole(page, role) {
            // Determine IDs based on page ('login' or 'reg')
            const prefix = page === 'login' ? 'login' : 'reg';
            
            const btnTenant = document.getElementById(`${prefix}-btn-tenant`);
            const btnOwner = document.getElementById(`${prefix}-btn-owner`);
            const inputHidden = document.getElementById(`${prefix}-role-input`);

            // Colors
            const colorClass = page === 'login' ? 'text-blue-600' : 'text-green-600';
            const activeStyle = `bg-white ${colorClass} shadow-sm font-semibold`;
            const inactiveStyle = "text-gray-500 hover:text-gray-700 font-medium bg-transparent shadow-none";

            // Update Value
            inputHidden.value = role;

            // Update UI
            if (role === 'tenant') {
                btnTenant.className = `w-1/2 py-2 rounded-lg text-sm transition-all ${activeStyle}`;
                btnOwner.className = `w-1/2 py-2 rounded-lg text-sm transition-all ${inactiveStyle}`;
            } else {
                btnOwner.className = `w-1/2 py-2 rounded-lg text-sm transition-all ${activeStyle}`;
                btnTenant.className = `w-1/2 py-2 rounded-lg text-sm transition-all ${inactiveStyle}`;
            }
        }
    </script>

</body>
</html>